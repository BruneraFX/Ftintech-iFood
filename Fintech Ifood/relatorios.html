<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/bootstrap.min.css">
    <link rel="stylesheet" href="./styles/styles.css">
    <link rel="stylesheet" href="./script/script.js">
    <link rel="stylesheet" href="./styles/menu.css">
    <link rel="stylesheet" href="./styles/relatorios.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css'>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Average+Sans&display=swap" >
    <link rel="stylesheet"href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <title>Relatórios - IFood Finanças</title>
</head>

<body>
    <nav>
        <div class="logo">
            <i class="bx bx-menu menu-icon"></i>
            <img class="logo1" src="./img/logo1.png" alt="logo iFood Finanças">
        </div>
        <div class="page-title">
            <h1>Relatórios</h1>
        </div>
        <div class="search-bar">
            <input type="text" placeholder="Pesquisar..." id="search-input" >
            <i class='bx bx-search-alt icone-pesquisa'></i>
            
        </div>
        <div class="profile">
            <img class="profile-pic" src="./img/foto perfil.png" alt="Foto de Perfil">
        </div>
        <div class="sidebar">
            <div class="logo">
                <i class="bx bx-menu menu-icon"></i>
                <img class="logo1" src="./img/logo1.png" alt="logo iFood Finanças">
            </div>
            <hr class="solid">
            <div class=" divider sidebar-conteudo">
                <ul class="lista">
                    <li class="lista_conteudo">
                        <a href="./home.html" class="nav-link">
                            <i class='bx bxs-home icon'></i>
                            <spam class="link">Dashboard</spam>
                        </a>
                    </li>
                    <li class="lista_conteudo">
                        <a href="./transacoes.html" class="nav-link">
                            <i class='bx bx-transfer-alt icon'></i>
                            <spam class="link">Transações</spam>
                        </a>
                    </li>
                    <li class="lista_conteudo">
                        <a href="./lojas.html" class="nav-link">
                            <i class='bx bxs-store-alt icon'></i>
                            <spam class="link">Minhas Lojas</spam>
                        </a>
                    </li>
                    <li class="lista_conteudo">
                        <a href="./relatorios.html" class="nav-link">
                            <i class='bx bx-line-chart icon'></i>
                            <spam class="link">Relatórios</spam>
                        </a>
                    </li>
                    <li class="lista_conteudo">
                        <a href="./fiscal.html" class="nav-link">
                            <i class='bx bx-receipt icon'></i>
                            <spam class="link">Área Fiscal</spam>
                        </a>
                    </li>
                    <li class="lista_conteudo">
                        <a href="./Configuracao1.html" class="nav-link">
                            <i class='bx bx-cog icon'></i>
                            <spam class="link">Configurações</spam>
                        </a>
                    </li>
                </ul>
            </div>
            
        </div>
    </nav>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Relatórios das Lojas</h1>
        <section class="mb-5">
            <h2 class="mb-3">Visão Geral</h2>
            <div class="row text-center">
                <div class="col-md-4">
                    <div class="bg-light p-4 rounded">
                        <h3>Faturamento Total</h3>
                        <h4 class="text-success">R$ 350.000,00</h4>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="bg-light p-4 rounded">
                        <h3>Total de Pedidos</h3>
                        <h4 class="text-info">5.230</h4>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="bg-light p-4 rounded">
                        <h3>Número de Clientes</h3>
                        <h4 class="text-primary">4.876</h4>
                    </div>
                </div>
            </div>
        </section>
        <section class="mb-5">
            <h2 class="mb-3">Comparativo Entre Lojas</h2>
            <canvas id="comparativoLojas"></canvas>
        </section>
        <section class="mb-5">
            <h2 class="mb-3">Relatório Financeiro</h2>
            <div class="row">
                <div class="col-md-6">
                    <canvas id="receitaMensal"></canvas>
                </div>
                <div class="col-md-6">
                    <canvas id="despesasOperacionais"></canvas>
                </div>
            </div>
        </section>
        <section class="mb-5">
            <h2 class="mb-3">Relatório de Vendas</h2>
            <div class="row">
                <div class="col-md-6">
                    <canvas id="topLanchesMaisVendidos"></canvas>
                </div>
                <div class="col-md-6">
                    <canvas id="ticketMedio"></canvas>
                </div>
            </div>
        </section>
        <section class="mb-5">
            <h2 class="mb-3">Relatório de Clientes</h2>
            <canvas id="frequenciaClientes"></canvas>
        </section>
        <section class="mb-5">
            <h2 class="mb-3">Relatório Operacional</h2>
            <canvas id="tempoMedioAtendimento"></canvas>
        </section>
    </div>

    <div class="text-center mb-5">
        <button class="btn btn-primary" id="generateReportBtn">Gerar Relatório</button>
    </div>
    
    <div id="reportModal" class="modal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background-color:rgba(0,0,0,0.5);">
        <div class="modal-content" style="background:white; padding:20px; margin:auto; margin-top:100px; width:80%; max-width:900px;">
            <h2>Relatório Completo</h2>
            <div id="reportContent">

                <table border="1" style="width: 100%; text-align: center; border-collapse: collapse;">
                    <thead>
                        <tr>
                            <th>Indicador</th>
                            <th>Loja Matriz</th>
                            <th>Franquia 1</th>
                            <th>Franquia 2</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Faturamento (R$)</td>
                            <td>150.000,00</td>
                            <td>120.000,00</td>
                            <td>80.000,00</td>
                        </tr>
                        <tr>
                            <td>Pedidos</td>
                            <td>2.300</td>
                            <td>1.800</td>
                            <td>1.130</td>
                        </tr>
                        <tr>
                            <td>Ticket Médio (R$)</td>
                            <td>35</td>
                            <td>40</td>
                            <td>30</td>
                        </tr>
                        <tr>
                            <td>Tempo Médio de Atendimento (min)</td>
                            <td>15</td>
                            <td>12</td>
                            <td>18</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="text-right mt-4">
                <button class="btn btn-secondary" id="printPdfBtn">Imprimir em PDF</button>
                <button class="btn btn-danger" id="closeModalBtn">Fechar</button>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>

<script>
    const navBar = document.querySelector("nav"),
    menuBtns = document.querySelectorAll(".menu-icon"),
    overlay = document.querySelector(".main")
    
    menuBtns.forEach(menuBtn => {
        menuBtn.addEventListener("click", () => {
            navBar.classList.toggle("open");
        });
    });

    overlay.addEventListener("click", () => {
        navBar.classList.remove("open");
    });
</script>

<script>
    const ctxComparativoLojas = document.getElementById('comparativoLojas').getContext('2d');
const comparativoLojas = new Chart(ctxComparativoLojas, {
    type: 'bar',
    data: {
        labels: ['Loja Matriz', 'Franquia 1', 'Franquia 2'],
        datasets: [
            {
                label: 'Faturamento (R$)',
                data: [150000, 120000, 80000],
                backgroundColor: ['rgba(75, 192, 192, 0.8)', 'rgba(54, 162, 235, 0.8)', 'rgba(255, 206, 86, 0.8)']
            },
            {
                label: 'Pedidos',
                data: [2300, 1800, 1130],
                backgroundColor: ['rgba(153, 102, 255, 0.8)', 'rgba(255, 159, 64, 0.8)', 'rgba(255, 99, 132, 0.8)']
            }
        ]
    },
    options: { responsive: true }
});

// Gráfico Receita Mensal
const ctxReceitaMensal = document.getElementById('receitaMensal').getContext('2d');
const receitaMensal = new Chart(ctxReceitaMensal, {
    type: 'line',
    data: {
        labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho'],
        datasets: [
            {
                label: 'Receita Mensal (R$)',
                data: [50000, 70000, 80000, 60000, 90000, 100000],
                backgroundColor: 'rgba(54, 162, 235, 0.8)',
                borderColor: 'rgba(54, 162, 235, 1)',
                fill: false
            }
        ]
    },
    options: { responsive: true }
});

// Gráfico de Despesas Operacionais
const ctxDespesasOperacionais = document.getElementById('despesasOperacionais').getContext('2d');
const despesasOperacionais = new Chart(ctxDespesasOperacionais, {
    type: 'doughnut',
    data: {
        labels: ['Aluguel', 'Salários', 'Insumos', 'Manutenção'],
        datasets: [{
            data: [30000, 25000, 15000, 5000],
            backgroundColor: ['rgba(255, 99, 132, 0.8)', 'rgba(54, 162, 235, 0.8)', 'rgba(255, 206, 86, 0.8)', 'rgba(75, 192, 192, 0.8)']
        }]
    },
    options: { responsive: true }
});

// Gráfico dos Top 10 Lanches Mais Vendidos
const ctxTopLanchesMaisVendidos = document.getElementById('topLanchesMaisVendidos').getContext('2d');
const topLanchesMaisVendidos = new Chart(ctxTopLanchesMaisVendidos, {
    type: 'bar',
    data: {
        labels: ['X-Burger', 'X-Salada', 'Hot Dog', 'Coxinha', 'Pastel', 'Pizza', 'Kibe', 'Batata Frita', 'Churros', 'Açaí'],
        datasets: [{
            label: 'Quantidade Vendida',
            data: [320, 280, 260, 250, 230, 220, 210, 200, 180, 170],
            backgroundColor: 'rgba(255, 159, 64, 0.8)'
        }]
    },
    options: { responsive: true }
});

// Gráfico do Ticket Médio
const ctxTicketMedio = document.getElementById('ticketMedio').getContext('2d');
const ticketMedio = new Chart(ctxTicketMedio, {
    type: 'pie',
    data: {
        labels: ['Loja Matriz', 'Franquia 1', 'Franquia 2'],
        datasets: [{
            label: 'Ticket Médio (R$)',
            data: [35, 40, 30],
            backgroundColor: ['rgba(54, 162, 235, 0.8)', 'rgba(255, 206, 86, 0.8)', 'rgba(153, 102, 255, 0.8)']
        }]
    },
    options: { responsive: true }
});

// Gráfico de Frequência de Clientes (Recorrentes vs Novos)
const ctxFrequenciaClientes = document.getElementById('frequenciaClientes').getContext('2d');
const frequenciaClientes = new Chart(ctxFrequenciaClientes, {
    type: 'line',
    data: {
        labels: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho'],
        datasets: [
            {
                label: 'Clientes Recorrentes',
                data: [200, 220, 230, 240, 250, 260],
                backgroundColor: 'rgba(54, 162, 235, 0.5)',
                borderColor: 'rgba(54, 162, 235, 1)',
                fill: true
            },
            {
                label: 'Clientes Novos',
                data: [180, 190, 200, 210, 220, 230],
                backgroundColor: 'rgba(255, 206, 86, 0.5)',
                borderColor: 'rgba(255, 206, 86, 1)',
                fill: true
            }
        ]
    },
    options: { responsive: true }
});

// Gráfico de Tempo Médio de Atendimento
const ctxTempoMedioAtendimento = document.getElementById('tempoMedioAtendimento').getContext('2d');
const tempoMedioAtendimento = new Chart(ctxTempoMedioAtendimento, {
    type: 'bar',
    data: {
        labels: ['Loja Matriz', 'Franquia 1', 'Franquia 2'],
        datasets: [{
            label: 'Tempo Médio de Atendimento (min)',
            data: [15, 12, 18],
            backgroundColor: ['rgba(255, 99, 132, 0.8)', 'rgba(54, 162, 235, 0.8)', 'rgba(75, 192, 192, 0.8)']
        }]
    },
    options: { responsive: true }
});

    // Abrir Modal
    document.getElementById("generateReportBtn").addEventListener("click", function() {
        document.getElementById("reportModal").style.display = "block";
    });

    // Fechar Modal
    document.getElementById("closeModalBtn").addEventListener("click", function() {
        document.getElementById("reportModal").style.display = "none";
    });

    // Imprimir PDF
    document.getElementById("printPdfBtn").addEventListener("click", function() {
        const reportContent = document.getElementById("reportContent").innerHTML;
        const originalContent = document.body.innerHTML;
        document.body.innerHTML = reportContent;
        window.print();
        document.body.innerHTML = originalContent;
    });

</script>
</html>
